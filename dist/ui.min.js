function createWadOverviewPanel(a){document.createElement("div").innerHTML="a wad is here!"}function makeUL(a){var b=document.createElement("ol");b.id="lumpUL";for(var c=0;c<a.length;c++){var d=document.createElement("li"),e=document.createElement("span");e.innerHTML+=getIcon(a[c][0]);var f=document.createTextNode(" "+a[c][1]);e.appendChild(f),d.appendChild(e),d.id="item",b.appendChild(d)}return b}function createLumpList(a){for(var b=0;b<a.lumps.length;b++)self.lumpnames.push([a.detectLumpType(b),a.lumps[b].name]);$("#lumpTable").show(),$("#lumpList").html(makeUL(self.lumpnames)),$("#lumpUL").delegate("li","click",function(b){for($("#preview").html(""),$("#preview").show();"item"!=b.target.id;)b.target=b.target.parentNode;for(var c=b.target,d=0;c.previousElementSibling;)c=c.previousElementSibling,d+=1;switch(lumptype=a.detectLumpType(d),lumptype){case PNG:$("#preview").html(""),$("#preview").append(createImagePreview(a.getLump(d)));break;case MP3:case MUSIC:$("#preview").html(""),$("#preview").append(createAudioPreview(a.getLump(d)));break;case MUS:$("#preview").html(""),$("#preview").append(createMIDIPreview(mus2midi(a.getLump(d))));break;case MIDI:$("#preview").html(""),$("#preview").append(createMIDIPreview(a.getLump(d)));break;case TEXT:$("#preview").html(""),$("#preview").append(createTextPreview(a.getLumpAsText(d)));break;case PLAYPAL:playpal=Object.create(Playpal),playpal.load(a.getLump(d)),$("#preview").html(""),document.getElementById("preview").appendChild(playpal.toCanvas());break;case COLORMAP:colormap=Object.create(Colormap),colormap.load(a.getLump(d)),$("#preview").html(""),document.getElementById("preview").appendChild(colormap.toCanvas(a));break;case FLAT:flat=Object.create(Flat),flat.load(a.getLump(d)),$("#preview").html(""),document.getElementById("preview").appendChild(flat.toCanvas(a));break;case GRAPHIC:graphic=Object.create(Graphic),graphic.load(a.getLump(d)),$("#preview").html(""),document.getElementById("preview").appendChild(graphic.toCanvas(a));break;case ENDOOM:endoom=Object.create(Endoom),endoom.onLoad=function(){$("#preview").html(""),document.getElementById("preview").appendChild(endoom.toCanvas())},endoom.load(a.getLump(d)),$("#preview").html("");break;case MAP:map=Object.create(MapData),map.load(a,a.lumps[d].name),$("#preview").html("");var e=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,f=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;document.getElementById("preview").appendChild(map.toCanvas(.8*(e-$("#lumpList").width()),.8*f));break;case MAPDATA:switch(mapdata=Object.create(MapData),a.lumps[d].name){case"VERTEXES":mapdata.parseVertexes(a.getLump(d)),$("#preview").html("Total vertexes: "+mapdata.vertexes.length.toString());break;case"LINEDEFS":mapdata.parseLinedefs(a.getLump(d)),$("#preview").html("Total linedefs: "+mapdata.linedefs.length.toString());break;case"SIDEDEFS":mapdata.parseSidedefs(a.getLump(d)),$("#preview").html("Total sidedefs: "+mapdata.sidedefs.length.toString());break;case"SECTORS":mapdata.parseSectors(a.getLump(d)),$("#preview").html("Total sectors: "+mapdata.sectors.length.toString());break;case"THINGS":mapdata.parseThings(a.getLump(d));var g=mapdata.getThingTable(),h="";for(var i in g)g.hasOwnProperty(i)&&(h+=mapdata.getDoomThingName(parseInt(i)),h+="s: "+g[i]+"<br>");$("#preview").html("Total things: "+mapdata.things.length.toString()+"<p>"+h);break;default:$("#preview").html("Unable to preview "+a.lumps[d].name+" lumps")}break;case"...":$("#preview").html("Unable to preview this lump, and can't detect it's type<br>");var j=document.createElement("button");j.onclick=function(){$("#preview").html(""),createTextPreview(self.wad.getLumpAsText(d))},j.innerHTML="View as text",$("#preview").append(j);break;default:$("#preview").html("Unable to preview "+lumptype+" lumps")}})}function createAudioPreview(a){var b=document.createElement("div"),c=document.createElement("div");textnode=document.createTextNode("Artist - Title"),c.appendChild(textnode);var d=new Blob([a]);audioEl=new Audio(URL.createObjectURL(d)),audioEl.controls=!0,console.log(audioEl);var e=document.createElement("input");e.type="checkbox";var f=document.createElement("span");return f.innerHTML="loop",f.for=e,e.onclick=function(){audioEl.loop=e.checked},b.append(c),b.append(audioEl),b.append(document.createElement("br")),b.append(e),b.append(f),b}function createTextPreview(a){var b=document.createElement("div");return b.id="textPreview",textnode=document.createTextNode(a),b.appendChild(textnode),b}function createImagePreview(a){var b=document.createElement("div"),c=new Blob([a]);return imageEl=new Image,imageEl.src=URL.createObjectURL(c),b.append(imageEl),b}function createMIDIPreview(a){var b=document.createElement("div"),c=URL.createObjectURL(new Blob([a])),d=function(){MIDIjs.play(c)},e=function(){MIDIjs.stop()},f=document.createElement("button");f.innerHTML='<i class="material-icons">play_arrow</i>',f.onclick=d;var g=document.createElement("button");return g.innerHTML='<i class="material-icons">stop</i>',g.onclick=e,b.append(f),b.append(g),b}function initWad(){self.errormsg=null,$(errors).html(""),$("#preview").hide(),$("#lumpTable").hide(),$("#loading").show(),progress=0,self.lumpList&&self.lumpList.destructor(),self.lumpnames=[],wad=Object.create(Wad),wad.onProgress=updateLoading,wad.onLoad=wadOnLoad}function loadURL(){initWad(),wad.loadURL(document.getElementById("urlInput").value)}function getIcon(a){return a==MAP?'<img src="icons/map.png">':a==MAPDATA?'<img src="icons/mapdata.png">':a==TEXT?'<img src="icons/text.png">':a==PLAYPAL?'<img src="icons/playpal.png">':a==ENDOOM?'<img src="icons/endoom.png">':a==COLORMAP?'<img src="icons/colormap.png">':a==MUSIC?'<img src="icons/music.png">':a==MIDI?'<img src="icons/midi.png">':a==MP3?'<img src="icons/mp3.png">':a==GRAPHIC?'<img src="icons/graphic.png">':a==FLAT?'<img src="icons/flat.png">':a==PNG?'<img src="icons/png.png">':a==MUS?'<img src="icons/mus.png">':a==MARKER?'<img src="icons/marker.png">':a==PNAMES?'<img src="icons/pnames.png">':TEXTUREx.indexOf(a)>=0?'<img src="icons/texturex.png">':'<img src="icons/unknown.png">'}function wadOnLoad(a){$("#loading").hide(),null!=self.errormsg?$(errors).html(self.errormsg):createLumpList(wad)}var self=this,lumpnames=["a","b","c"],fileInput=document.getElementById("fileInput"),fileDisplayArea=document.getElementById("test"),lumpList=null,loadingInterval,errors=document.getElementById("errors");$("#preview").hide(),$("#lumpTable").hide(),$("#loading").hide();var progress=0,wad=Object.create(Wad);fileInput.addEventListener("change",function(a){initWad();var b=fileInput.files[0];console.log(b),wad.load(b)});var updateLoading=function(a){progress++;for(var b=36*progress/(16*wad.numlumps/128),c="[",d=0;d<b;d++)c+=".";for(d=b;d<36;d++)c+="&nbsp;";document.getElementById("loading").innerHTML=c+"]"};
//# sourceMappingURL=ui.min.js.map